---
const title = "VisionAI - AI-Powered Image Classification";
const description = "Train custom image classification models in your browser. Drag & drop your dataset, train with TensorFlow.js, and get instant predictions.";
---

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{title}</title>
	<meta name="description" content={description}>
	
	<!-- SEO Meta Tags -->
	<meta name="keywords" content="image classification, machine learning, AI, TensorFlow, computer vision, deep learning, neural network">
	<meta name="author" content="VisionAI">
	<meta name="robots" content="index, follow">
	
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:title" content={title}>
	<meta property="og:description" content={description}>
	<meta property="og:image" content="/og-image.png">
	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content={title}>
	<meta name="twitter:description" content={description}>
	
	<!-- Favicon -->
	<link rel="icon" type="image/svg+xml" href="/favicon.svg">
	
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
	<div class="app">
		<!-- Header -->
		<header class="header">
			<div class="container">
				<div class="logo-container">
					<svg class="logo-icon" viewBox="0 0 40 40" fill="none">
						<defs>
							<linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
								<stop offset="0%" style="stop-color:#0066ff"/>
								<stop offset="100%" style="stop-color:#00d4ff"/>
							</linearGradient>
						</defs>
						<circle cx="20" cy="20" r="18" stroke="url(#logoGradient)" stroke-width="2" fill="none"/>
						<circle cx="20" cy="20" r="8" fill="url(#logoGradient)"/>
						<circle cx="20" cy="20" r="4" fill="white"/>
						<path d="M8 20 L12 20 M28 20 L32 20 M20 8 L20 12 M20 28 L20 32" stroke="url(#logoGradient)" stroke-width="2" stroke-linecap="round"/>
					</svg>
					<h1 class="logo-text">VisionAI</h1>
				</div>
				<div class="header-right">
					<div class="global-lang-selector">
						<button class="g-lang-btn active" data-g-lang="id">ID</button>
						<button class="g-lang-btn" data-g-lang="en">EN</button>
						<button class="g-lang-btn" data-g-lang="jp">JP</button>
					</div>
					<div class="status-badge" id="statusBadge">
						<span class="status-dot"></span>
						<span data-t="status-ready">Ready</span>
					</div>
				</div>
			</div>
		</header>

		<!-- Hero Section -->
		<section class="hero">
			<div class="container">
				<div class="hero-content">
					<h2 class="hero-title" data-t="hero-title">Train Your Own<br/><span class="gradient-text">Image Classifier</span></h2>
					<p class="hero-description" data-t="hero-desc">No coding required. Just drag & drop your images, and let AI do the magic.</p>
					<div class="hero-features">
						<div class="feature-badge">
							<svg viewBox="0 0 20 20" fill="currentColor">
								<path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z"/>
							</svg>
							<span data-t="f-browser">Browser-based Training</span>
						</div>
						<div class="feature-badge">
							<svg viewBox="0 0 20 20" fill="currentColor">
								<path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
							</svg>
							<span data-t="f-realtime">Real-time Results</span>
						</div>
						<div class="feature-badge">
							<svg viewBox="0 0 20 20" fill="currentColor">
								<path d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z"/>
							</svg>
							<span data-t="f-noserver">No Server Required</span>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Main Content -->
		<main class="main">
			<div class="container">
				<!-- Step 1: Upload Dataset -->
				<section class="card">
					<div class="card-header">
						<div class="step-badge">
							<span class="step-number">1</span>
						</div>
						<div class="card-title-group">
							<h3 class="card-title" data-t="step-1-title">Upload Training Data</h3>
							<p class="card-subtitle" data-t="step-1-subtitle">Drag & drop a folder with images organized by class</p>
						</div>
					</div>
					
					<div class="upload-zone" id="uploadZone">
						<div class="upload-icon-wrapper">
							<svg class="upload-icon" viewBox="0 0 64 64" fill="none" stroke="currentColor">
								<path d="M52 48v8a4 4 0 01-4 4H16a4 4 0 01-4-4v-8M44 20L32 8 20 20M32 8v32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</div>
						<h4 class="upload-title" data-t="upload-title">Drop your folder here</h4>
						<p class="upload-subtitle" data-t="upload-subtitle">or click to browse files</p>
						<div class="upload-hint">
							<svg viewBox="0 0 20 20" fill="currentColor">
								<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
							</svg>
							<span data-t="upload-hint">Organize: MyData/class1/img1.jpg, MyData/class2/img2.jpg</span>
						</div>
						<input type="file" id="fileInput" webkitdirectory directory multiple accept="image/*" hidden/>
					</div>

					<div class="dataset-summary" id="datasetSummary" style="display: none;">
						<div class="stats-grid">
							<div class="stat-card">

								<div class="stat-content">
									<div class="stat-value" id="totalImages">0</div>
									<div class="stat-label" data-t="stat-images">Total Images</div>
								</div>
							</div>
							<div class="stat-card">
								<div class="stat-content">
									<div class="stat-value" id="totalClasses">0</div>
									<div class="stat-label" data-t="stat-classes">Classes</div>
								</div>
							</div>
						</div>
						<div class="class-pills" id="classTags"></div>
						<button class="btn-primary" id="startTrainBtn">
							<svg viewBox="0 0 20 20" fill="currentColor">
								<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
							</svg>
							<span data-t="btn-train">Start Training</span>
						</button>
					</div>
				</section>

				<!-- Step 2: Training Progress -->
				<section class="card" id="trainSection" style="display: none;">
					<div class="card-header">
						<div class="step-badge">
							<span class="step-number">2</span>
						</div>
						<div class="card-title-group">
							<h3 class="card-title" data-t="step-2-title">Training in Progress</h3>
							<p class="card-subtitle" data-t="step-2-subtitle">Your model is learning from the data</p>
						</div>
					</div>

					<div class="training-progress">
						<div class="progress-ring">
							<svg class="progress-svg" viewBox="0 0 120 120">
								<circle class="progress-bg" cx="60" cy="60" r="54"/>
								<circle class="progress-bar" id="progressCircle" cx="60" cy="60" r="54"/>
							</svg>
							<div class="progress-content">
								<div class="progress-percent" id="progressPercent">0%</div>
								<div class="progress-label" data-t="prog-complete">Complete</div>
							</div>
						</div>
						<div class="progress-details">
							<div class="progress-text" id="progressText">Initializing...</div>
							<div class="progress-bar-linear">
								<div class="progress-fill" id="progressFill"></div>
							</div>
						</div>
					</div>
				</section>

				<!-- Step 3: Test Model -->
				<section class="card" id="testSection" style="display: none;">
					<div class="card-header">
						<div class="step-badge">
							<span class="step-number">3</span>
						</div>
						<div class="card-title-group">
							<h3 class="card-title" data-t="step-3-title">Test Your Model</h3>
							<p class="card-subtitle" data-t="step-3-subtitle">Upload an image to see predictions</p>
						</div>
					</div>

					<div class="test-grid">
						<div class="test-upload-card" id="testUpload">
							<svg class="test-upload-icon" viewBox="0 0 64 64" fill="none" stroke="currentColor">
								<rect x="8" y="8" width="48" height="48" rx="4" stroke-width="3"/>
								<circle cx="22" cy="22" r="4"/>
								<path d="M56 40L44 28 20 52" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<p class="test-upload-text" data-t="test-upload">Click to upload test image</p>
							<input type="file" id="testInput" accept="image/*" hidden/>
						</div>

						<div class="test-result-card" id="testResult" style="display: none;">
							<div class="result-image-wrapper">
								<img id="testImage" alt="Test image"/>
							</div>
							<div class="result-details">
								<div class="result-prediction">
									<div class="result-label" data-t="res-pred">Prediction</div>
									<div class="result-class" id="resultClass"></div>
								</div>
								<div class="result-confidence-wrapper">
									<div class="result-label" data-t="res-conf">Confidence</div>
									<div class="confidence-bar-wrapper">
										<div class="confidence-bar">
											<div class="confidence-fill" id="confidenceFill"></div>
										</div>
										<span class="confidence-text" id="confidenceText"></span>
									</div>
								</div>
								<div class="all-predictions" id="allPredictions"></div>
								
								<div class="result-insights" id="resultInsights" style="display: none;">
									<div class="insight-header">
										<div class="result-label" data-t="res-analysis">Analysis Insight</div>
									</div>
									<div class="insight-box">
										<p id="insightText"></p>
									</div>
									
									<!-- New AI Deep Analysis Section -->
									<div class="ai-deep-check" id="aiDeepCheck">
										<div class="result-label">Deep Analysis (via OpenCode AI)</div>
										<div class="deep-check-box">
											<div class="check-loading" id="aiLoading" style="display: none;">
												<div class="spinner"></div>
												<span>Deeply scanning image pattern...</span>
											</div>
											<div class="check-result" id="aiDeepResult" style="display: none;">
												<p class="ai-desc" id="aiDesc"></p>
												<div class="ai-tags" id="aiTags"></div>
												<a href="https://opencode.ai" target="_blank" class="opencode-btn">
													<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
														<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
														<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
													</svg>
													<span>Refine with OpenCode AI</span>
												</a>
											</div>
										</div>
									</div>

									<div class="encyclopedia-section" id="encyclopediaSection" style="display: none;">
										<div class="result-label" data-t="res-ency">Encyclopedia</div>
										<div class="encyclopedia-box">
											<h4 id="encyName"></h4>
											<p id="encyDesc"></p>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>

				<!-- Step 4: Export Model -->
				<section class="card" id="exportSection" style="display: none;">
					<div class="card-header">
						<div class="step-badge">
							<span class="step-number">4</span>
						</div>
						<div class="card-title-group">
							<h3 class="card-title" data-t="step-4-title">Export & Use Model</h3>
							<p class="card-subtitle" data-t="step-4-subtitle">Pilih format sesuai aplikasi yang ingin Anda bangun</p>
						</div>
					</div>
					
					<div class="export-hub">
						<div class="format-tabs">
							<button class="format-tab active" data-format="web">
								<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<circle cx="12" cy="12" r="10"></circle>
									<line x1="2" y1="12" x2="22" y2="12"></line>
									<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
								</svg>
								<span>Web / Cloud</span>
							</button>
							<button class="format-tab" data-format="ios">
								<svg viewBox="0 0 24 24" fill="currentColor" stroke="none">
									<path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.1 2.48-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-1.04 1.23-2.5.96-3.8-1.31.05-2.92.87-3.86 1.97-.84.99-1.58 2.47-1.32 3.96 1.48.11 2.97-.88 3.53-2.13z"/>
								</svg>
								<span>iOS / macOS</span>
							</button>
							<button class="format-tab" data-format="android">
								<svg viewBox="0 0 24 24" fill="currentColor" stroke="none">
									<path d="M17.523 15.3414C17.065 15.3414 16.6908 14.9672 16.6908 14.5092C16.6908 14.0512 17.065 13.677 17.523 13.677C17.981 13.677 18.3551 14.0512 18.3551 14.5092C18.3551 14.9672 17.981 15.3414 17.523 15.3414ZM6.477 15.3414C6.019 15.3414 5.64485 14.9672 5.64485 14.5092C5.64485 14.0512 6.019 13.677 6.477 13.677C6.935 13.677 7.30915 14.0512 7.30915 14.5092C7.30915 14.9672 6.935 15.3414 6.477 15.3414ZM18.0673 10.1585L19.9866 6.83401C20.129 6.58732 20.0442 6.27306 19.7975 6.13067C19.5508 5.98828 19.2366 6.073 19.0942 6.31969L17.1517 9.68412C15.7029 9.02324 14.084 8.653 12.3852 8.653C10.6864 8.653 9.06752 9.02324 7.61869 9.68412L5.67623 6.31969C5.53384 6.073 5.21957 5.98828 4.97289 6.13067C4.72621 6.27306 4.64137 6.58732 4.78377 6.83401L6.70308 10.1585C3.71969 11.8385 1.63702 14.9314 1.5034 18.5209H23.2671C23.1334 14.9314 21.0508 11.8385 18.0673 10.1585Z"/>
								</svg>
								<span>Android</span>
							</button>
						</div>

						<div class="format-content" id="formatContent">
							<div class="format-panel active" id="panel-web">
								<div class="panel-header">
									<div class="panel-info">
										<h4 data-t="exp-tfjs">Format TensorFlow.js</h4>
										<p data-t="exp-tfjs-desc">Download model untuk web atau aplikasi Node.js.</p>
									</div>
								</div>
								<div class="export-actions">
									<button class="btn-primary" id="btnExportWeb">
										<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
											<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
										</svg>
										<span>Download Web Bundle (.zip)</span>
									</button>
								</div>
							</div>

							<div class="format-panel" id="panel-ios">
								<div class="panel-header">
									<div class="panel-info">
										<h4 data-t="exp-convert">iOS Deployment Kit</h4>
										<p data-t="exp-convert-desc">Convert to .mlmodel for iPhone, iPad, or Mac.</p>
									</div>
								</div>
								<div class="conversion-steps">
									<div class="c-step">
										<span class="c-num">1</span>
										<p>Download iOS Kit & Model Files</p>
									</div>
									<div class="c-step">
										<span class="c-num">2</span>
										<p>Extract & Run <code>python convert.py</code> on macOS</p>
									</div>
								</div>
								<button class="btn-primary" id="btnExportIos">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
										<path d="M12 5v14M5 12h14"/>
									</svg>
									<span>Download iOS Bundle (.zip)</span>
								</button>
							</div>

							<div class="format-panel" id="panel-android">
								<div class="panel-header">
									<div class="panel-info">
										<h4>Android Deployment Kit</h4>
										<p>Generate TFLite for Android apps and IoT devices.</p>
									</div>
								</div>
								<div class="code-snippet-box">
									<code style="color: #00ff88;">pip install tensorflowjs</code>
									<code style="color: #00d4ff;">tensorflowjs_converter --input_format=tfjs_layers_model model.json ./tflite</code>
								</div>
								<button class="btn-primary" id="btnExportAndroid">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
										<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
									</svg>
									<span>Download Android Bundle (.zip)</span>
								</button>
							</div>
						</div>
					</div>
				</section>
			</div>
		</main>

		<!-- Footer -->
		<footer class="footer">
			<div class="container">
				<div class="footer-content">
					<div class="footer-brand">
						<svg class="footer-logo" viewBox="0 0 40 40" fill="none">
							<defs>
								<linearGradient id="footerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
									<stop offset="0%" style="stop-color:#0066ff"/>
									<stop offset="100%" style="stop-color:#00d4ff"/>
								</linearGradient>
							</defs>
							<circle cx="20" cy="20" r="18" stroke="url(#footerGradient)" stroke-width="2" fill="none"/>
							<circle cx="20" cy="20" r="8" fill="url(#footerGradient)"/>
							<circle cx="20" cy="20" r="4" fill="white"/>
						</svg>
						<span>VisionAI</span>
					</div>
					<p class="footer-text"><span data-t="footer-powered">Powered by</span> <span class="kamy-text">KaMy</span></p>
				</div>
			</div>
		</footer>
	</div>

	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		:root {
			--bg: #0a0a0a;
			--surface: #141414;
			--surface-elevated: #1a1a1a;
			--border: #2a2a2a;
			--text: #ffffff;
			--text-secondary: #a0a0a0;
			--text-muted: #666666;
			--primary: #0066ff;
			--primary-hover: #0052cc;
			--success: #00ff88;
			--gradient: linear-gradient(135deg, #0066ff 0%, #00d4ff 100%);
			--radius: 16px;
			--shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
		}

		body {
			background: var(--bg);
			color: var(--text);
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			line-height: 1.6;
			-webkit-font-smoothing: antialiased;
		}

		.app {
			min-height: 100vh;
			display: flex;
			flex-direction: column;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 24px;
			width: 100%;
		}

		/* Header */
		.header {
			background: rgba(20, 20, 20, 0.8);
			backdrop-filter: blur(20px);
			border-bottom: 1px solid var(--border);
			padding: 16px 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		.header .container {
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.header-right {
			display: flex;
			align-items: center;
			gap: 16px;
		}

		.global-lang-selector {
			display: flex;
			gap: 4px;
			background: rgba(255, 255, 255, 0.03);
			padding: 4px;
			border-radius: 8px;
			border: 1px solid var(--border);
		}

		.g-lang-btn {
			background: transparent;
			border: none;
			color: var(--text-muted);
			padding: 4px 8px;
			border-radius: 6px;
			font-size: 11px;
			font-weight: 700;
			cursor: pointer;
			transition: all 0.2s;
		}

		.g-lang-btn:hover {
			color: var(--text);
		}

		.g-lang-btn.active {
			background: var(--primary);
			color: white;
		}


		.logo-container {
			display: flex;
			align-items: center;
			gap: 12px;
		}

		.logo-icon {
			width: 40px;
			height: 40px;
		}

		.logo-text {
			font-size: 24px;
			font-weight: 800;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.status-badge {
			display: flex;
			align-items: center;
			gap: 8px;
			background: var(--surface-elevated);
			border: 1px solid var(--border);
			padding: 8px 16px;
			border-radius: 24px;
			font-size: 14px;
		}

		.status-dot {
			width: 8px;
			height: 8px;
			background: var(--success);
			border-radius: 50%;
			animation: pulse 2s infinite;
		}

		@keyframes pulse {
			0%, 100% { opacity: 1; }
			50% { opacity: 0.5; }
		}

		/* Hero */
		.hero {
			padding: 80px 0 60px;
			text-align: center;
		}

		.hero-title {
			font-size: 56px;
			font-weight: 800;
			line-height: 1.1;
			margin-bottom: 20px;
			letter-spacing: -0.02em;
		}

		.gradient-text {
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.hero-description {
			font-size: 20px;
			color: var(--text-secondary);
			margin-bottom: 32px;
			max-width: 600px;
			margin-left: auto;
			margin-right: auto;
		}

		.hero-features {
			display: flex;
			gap: 16px;
			justify-content: center;
			flex-wrap: wrap;
		}

		.feature-badge {
			display: flex;
			align-items: center;
			gap: 8px;
			background: var(--surface-elevated);
			border: 1px solid var(--border);
			padding: 10px 20px;
			border-radius: 24px;
			font-size: 14px;
			color: var(--text-secondary);
		}

		.feature-badge svg {
			width: 16px;
			height: 16px;
			color: var(--primary);
		}

		/* Main */
		.main {
			flex: 1;
			padding: 40px 0 80px;
		}

		.card {
			background: var(--surface);
			border: 1px solid var(--border);
			border-radius: var(--radius);
			padding: 32px;
			margin-bottom: 24px;
			box-shadow: var(--shadow);
		}

		.card-header {
			display: flex;
			gap: 20px;
			margin-bottom: 32px;
		}

		.step-badge {
			width: 56px;
			height: 56px;
			background: var(--gradient);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-shrink: 0;
			box-shadow: 0 4px 16px rgba(0, 102, 255, 0.3);
		}

		.step-number {
			font-size: 24px;
			font-weight: 700;
			color: white;
		}

		.card-title {
			font-size: 24px;
			font-weight: 700;
			margin-bottom: 4px;
		}

		.card-subtitle {
			color: var(--text-secondary);
			font-size: 14px;
		}

		/* Upload Zone */
		.upload-zone {
			border: 2px dashed var(--border);
			border-radius: var(--radius);
			padding: 64px 32px;
			text-align: center;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			background: var(--surface-elevated);
		}

		.upload-zone:hover, .upload-zone.drag-over {
			border-color: var(--primary);
			background: rgba(0, 102, 255, 0.05);
			transform: translateY(-2px);
		}

		.upload-icon-wrapper {
			margin-bottom: 24px;
		}

		.upload-icon {
			width: 64px;
			height: 64px;
			color: var(--text-muted);
			margin: 0 auto;
		}

		.upload-title {
			font-size: 20px;
			font-weight: 600;
			margin-bottom: 8px;
		}

		.upload-subtitle {
			color: var(--text-secondary);
			font-size: 14px;
			margin-bottom: 20px;
		}

		.upload-hint {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			background: var(--surface);
			padding: 8px 16px;
			border-radius: 20px;
			font-size: 12px;
			color: var(--text-muted);
		}

		.upload-hint svg {
			width: 16px;
			height: 16px;
		}

		/* Dataset Summary */
		.dataset-summary {
			margin-top: 32px;
			padding-top: 32px;
			border-top: 1px solid var(--border);
		}

		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 16px;
			margin-bottom: 24px;
		}

		.stat-card {
			background: var(--surface-elevated);
			border: 1px solid var(--border);
			border-radius: 12px;
			padding: 20px;
			display: flex;
			align-items: center;
			gap: 16px;
		}

		.stat-icon {
			font-size: 32px;
		}

		.stat-value {
			font-size: 32px;
			font-weight: 700;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			line-height: 1;
			margin-bottom: 4px;
		}

		.stat-label {
			font-size: 12px;
			color: var(--text-muted);
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}

		.class-pills {
			display: flex;
			flex-wrap: wrap;
			gap: 8px;
			margin-bottom: 24px;
		}

		.class-pill {
			background: var(--surface-elevated);
			border: 1px solid var(--border);
			padding: 10px 18px;
			border-radius: 20px;
			font-size: 14px;
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.class-pill strong {
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		/* Button */
		.btn-primary {
			background: var(--gradient);
			color: white;
			border: none;
			padding: 16px 32px;
			border-radius: 12px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			box-shadow: 0 4px 16px rgba(0, 102, 255, 0.3);
		}

		.btn-primary svg {
			width: 20px;
			height: 20px;
		}

		.btn-primary:hover:not(:disabled) {
			transform: translateY(-2px);
			box-shadow: 0 6px 24px rgba(0, 102, 255, 0.4);
		}

		.btn-primary:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		/* Training Progress */
		.training-progress {
			display: grid;
			grid-template-columns: auto 1fr;
			gap: 40px;
			align-items: center;
		}

		.progress-ring {
			position: relative;
			width: 120px;
			height: 120px;
		}

		.progress-svg {
			transform: rotate(-90deg);
		}

		.progress-bg {
			fill: none;
			stroke: var(--surface-elevated);
			stroke-width: 8;
		}

		.progress-bar {
			fill: none;
			stroke: url(#logoGradient);
			stroke-width: 8;
			stroke-linecap: round;
			stroke-dasharray: 339.292;
			stroke-dashoffset: 339.292;
			transition: stroke-dashoffset 0.3s;
		}

		.progress-content {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			text-align: center;
		}

		.progress-percent {
			font-size: 24px;
			font-weight: 700;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.progress-label {
			font-size: 11px;
			color: var(--text-muted);
			text-transform: uppercase;
		}

		.progress-details {
			flex: 1;
		}

		.progress-text {
			font-size: 16px;
			color: var(--text-secondary);
			margin-bottom: 12px;
		}

		.progress-bar-linear {
			height: 8px;
			background: var(--surface-elevated);
			border-radius: 4px;
			overflow: hidden;
		}

		.progress-fill {
			height: 100%;
			background: var(--gradient);
			transition: width 0.3s;
			width: 0%;
		}

		/* Test Grid */
		.test-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 24px;
		}

		.test-upload-card {
			border: 2px dashed var(--border);
			border-radius: var(--radius);
			padding: 64px 32px;
			text-align: center;
			cursor: pointer;
			transition: all 0.3s;
			background: var(--surface-elevated);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			min-height: 400px;
		}

		.test-upload-card:hover {
			border-color: var(--primary);
			background: rgba(0, 102, 255, 0.05);
			transform: translateY(-2px);
		}

		.test-upload-icon {
			width: 64px;
			height: 64px;
			color: var(--text-muted);
			margin-bottom: 20px;
		}

		.test-upload-text {
			color: var(--text-secondary);
			font-size: 16px;
		}

		.test-result-card {
			background: var(--surface-elevated);
			border: 1px solid var(--border);
			border-radius: var(--radius);
			overflow: hidden;
		}

		.result-image-wrapper {
			width: 100%;
			height: 300px;
			overflow: hidden;
		}

		.result-image-wrapper img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.result-details {
			padding: 24px;
		}

		.result-label {
			font-size: 11px;
			color: var(--text-muted);
			text-transform: uppercase;
			letter-spacing: 0.5px;
			margin-bottom: 8px;
		}

		.result-class {
			font-size: 32px;
			font-weight: 700;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			margin-bottom: 20px;
		}

		.confidence-bar-wrapper {
			margin-bottom: 24px;
		}

		.confidence-bar {
			height: 8px;
			background: var(--surface);
			border-radius: 4px;
			overflow: hidden;
			margin-bottom: 8px;
		}

		.confidence-fill {
			height: 100%;
			background: var(--success);
			transition: width 0.3s;
			width: 0%;
		}

		.confidence-text {
			font-size: 14px;
			color: var(--text-secondary);
		}

		.all-predictions {
			padding-top: 20px;
			border-top: 1px solid var(--border);
		}

		.all-predictions h4 {
			font-size: 12px;
			color: var(--text-muted);
			text-transform: uppercase;
			letter-spacing: 0.5px;
			margin-bottom: 12px;
		}

		.prediction-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 8px 0;
			font-size: 14px;
		}

		.prediction-item .name {
			color: var(--text);
		}

		.prediction-item .score {
			color: var(--text-muted);
			font-weight: 600;
		}

		/* Result Insights */
		.result-insights {
			margin-top: 24px;
			padding-top: 24px;
			border-top: 1px solid var(--border);
		}

		.insight-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 8px;
		}

		.insight-box {
			background: rgba(0, 102, 255, 0.05);
			border: 1px solid rgba(0, 102, 255, 0.2);
			border-radius: 12px;
			padding: 16px;
		}

		.insight-box p {
			font-size: 14px;
			color: var(--text-secondary);
			line-height: 1.5;
		}

		.insight-highlight {
			color: var(--primary);
			font-weight: 600;
		}

		/* Encyclopedia */
		.encyclopedia-section {
			margin-top: 24px;
		}

		.encyclopedia-box {
			background: linear-gradient(145deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
			border: 1px solid rgba(255, 255, 255, 0.1);
			padding: 24px;
			border-radius: 16px;
			position: relative;
			overflow: hidden;
		}

		.encyclopedia-box::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 4px;
			height: 100%;
			background: var(--primary);
		}

		.encyclopedia-box h4 {
			font-size: 18px;
			margin-bottom: 12px;
			color: var(--text);
			font-weight: 700;
		}

		.encyclopedia-box p {
			font-size: 14px;
			color: var(--text-secondary);
			line-height: 1.6;
			margin-bottom: 20px;
		}

		.btn-wiki {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			padding: 10px 16px;
			background: rgba(255, 255, 255, 0.05);
			border: 1px solid rgba(255, 255, 255, 0.1);
			border-radius: 10px;
			color: var(--primary);
			text-decoration: none;
			font-size: 13px;
			font-weight: 600;
			transition: all 0.2s;
		}

		.btn-wiki:hover {
			background: var(--primary);
			color: white;
			transform: translateX(4px);
		}

		.btn-wiki svg {
			width: 16px;
			height: 16px;
		}

		/* Export Hub */
		.export-hub {
			background: var(--surface-elevated);
			border: 1px solid var(--border);
			border-radius: 20px;
			overflow: hidden;
		}

		.format-tabs {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			background: rgba(0, 0, 0, 0.2);
			padding: 8px;
			gap: 8px;
		}

		.format-tab {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 8px;
			padding: 16px;
			background: transparent;
			border: 1px solid transparent;
			border-radius: 12px;
			color: var(--text-muted);
			cursor: pointer;
			transition: all 0.3s;
		}

		.format-tab svg {
			width: 28px;
			height: 28px;
		}

		.format-tab span {
			font-size: 12px;
			font-weight: 600;
		}

		.format-tab:hover {
			color: var(--text);
			background: rgba(255, 255, 255, 0.03);
		}

		.format-tab.active {
			background: var(--surface);
			border-color: rgba(255, 255, 255, 0.1);
			color: var(--primary);
			box-shadow: var(--shadow);
		}

		.format-content {
			padding: 32px;
		}

		.format-panel {
			display: none;
		}

		.format-panel.active {
			display: block;
			animation: fadeIn 0.4s ease-out;
		}

		@keyframes fadeIn {
			from { opacity: 0; transform: translateY(10px); }
			to { opacity: 1; transform: translateY(0); }
		}

		.panel-header {
			margin-bottom: 24px;
		}

		.panel-info h4 {
			font-size: 20px;
			font-weight: 700;
			margin-bottom: 8px;
		}

		.panel-info p {
			font-size: 14px;
			color: var(--text-secondary);
		}

		.conversion-steps {
			display: flex;
			flex-direction: column;
			gap: 12px;
			margin-bottom: 24px;
		}

		.c-step {
			display: flex;
			align-items: center;
			gap: 16px;
			background: rgba(255, 255, 255, 0.03);
			padding: 16px;
			border-radius: 12px;
		}

		.c-num {
			width: 24px;
			height: 24px;
			background: var(--primary);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 12px;
			font-weight: 800;
		}

		.c-step code {
			background: #000;
			padding: 2px 6px;
			border-radius: 4px;
			color: var(--success);
		}

		.code-snippet-box {
			background: #000;
			padding: 20px;
			border-radius: 12px;
			margin-bottom: 24px;
			font-family: 'JetBrains Mono', 'Fira Code', monospace;
			font-size: 13px;
			border: 1px solid rgba(255, 255, 255, 0.05);
		}

		.code-label {
			display: block;
			color: var(--text-muted);
			margin-bottom: 12px;
			font-size: 11px;
			text-transform: uppercase;
		}

		.code-snippet-box code {
			display: block;
			line-height: 1.8;
		}

		/* Footer */
		.footer {
			background: var(--surface);
			border-top: 1px solid var(--border);
			padding: 32px 0;
			margin-top: auto;
		}

		.footer-content {
			text-align: center;
		}

		.footer-brand {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 12px;
			margin-bottom: 12px;
		}

		.footer-logo {
			width: 32px;
			height: 32px;
		}

		.footer-brand span {
			font-size: 18px;
			font-weight: 700;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.footer-text {
			color: var(--text-muted);
			font-size: 14px;
		}

	.kamy-text {
		font-weight: 700;
		font-size: 16px;
		background: var(--gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
		letter-spacing: 0.5px;
	}

		@media (max-width: 768px) {
			.hero-title {
				font-size: 40px;
			}

			.test-grid {
				grid-template-columns: 1fr;
			}

			.training-progress {
				grid-template-columns: 1fr;
				text-align: center;
			}

			.progress-ring {
				margin: 0 auto;
			}
		}

		/* AI Deep Check Styles */
		.ai-deep-check {
			margin-top: 24px;
			padding-top: 24px;
			border-top: 1px dashed var(--border);
		}

		.deep-check-box {
			background: rgba(255, 255, 255, 0.03);
			border: 1px solid var(--border);
			border-radius: 12px;
			padding: 20px;
			margin-top: 12px;
			min-height: 100px;
			display: flex;
			flex-direction: column;
			justify-content: center;
		}

		.check-loading {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 12px;
			color: var(--text-secondary);
		}

		.spinner {
			width: 24px;
			height: 24px;
			border: 2px solid rgba(0, 102, 255, 0.1);
			border-top-color: var(--primary);
			border-radius: 50%;
			animation: spin 0.8s linear infinite;
		}

		@keyframes spin {
			to { transform: rotate(360deg); }
		}

		.ai-desc {
			font-size: 15px;
			margin-bottom: 16px;
			color: var(--text-secondary);
		}

		.ai-highlight {
			color: var(--success);
			font-weight: 700;
			text-transform: capitalize;
		}

		.ai-tags {
			display: flex;
			flex-wrap: wrap;
			gap: 8px;
			margin-bottom: 20px;
		}

		.ai-tag {
			background: var(--surface-elevated);
			padding: 6px 12px;
			border-radius: 8px;
			font-size: 13px;
			display: flex;
			align-items: center;
			gap: 6px;
			border: 1px solid var(--border);
		}

		.ai-tag small {
			color: var(--primary);
			font-weight: 700;
			opacity: 0.8;
		}

		.opencode-btn {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			background: rgba(0, 102, 255, 0.1);
			border: 1px solid var(--primary);
			color: var(--primary);
			text-decoration: none;
			padding: 10px 16px;
			border-radius: 8px;
			font-size: 13px;
			font-weight: 600;
			transition: all 0.2s;
		}

		.opencode-btn:hover {
			background: var(--primary);
			color: white;
		}

		.opencode-btn svg {
			width: 14px;
			height: 14px;
		}
	</style>

	<!-- VisionAI Power Core: TensorFlow + MobileNet -->
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

	<script is:inline>
		let uploadedDataset = {};
		let trainedModel = null;
		let featureExtractor = null;
		let classNames = [];
		let aiModel = null; // For Deep Analysis (Standard MobileNet)

		const uploadZone = document.getElementById('uploadZone');
		const fileInput = document.getElementById('fileInput');
		const datasetSummary = document.getElementById('datasetSummary');
		const startTrainBtn = document.getElementById('startTrainBtn');

		// Prevent default drag behavior on entire document
		['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
			document.body.addEventListener(eventName, (e) => {
				e.preventDefault();
				e.stopPropagation();
			}, false);
		});


		uploadZone.addEventListener('click', () => fileInput.click());

		fileInput.addEventListener('change', (e) => {
			const files = Array.from(e.target.files || []);
			processFiles(files);
		});

		uploadZone.addEventListener('dragover', (e) => {
			e.preventDefault();
			e.stopPropagation();
			uploadZone.classList.add('drag-over');
		});

		uploadZone.addEventListener('dragleave', (e) => {
			e.preventDefault();
			e.stopPropagation();
			uploadZone.classList.remove('drag-over');
		});

		uploadZone.addEventListener('drop', async (e) => {
			e.preventDefault();
			e.stopPropagation();
			uploadZone.classList.remove('drag-over');

			const items = e.dataTransfer.items;
			const files = [];

			for (let i = 0; i < items.length; i++) {
				const item = items[i].webkitGetAsEntry();
				if (item) {
					await traverseFileTree(item, files);
				}
			}

			if (files.length > 0) {
				processFiles(files);
			}
		});

		async function traverseFileTree(item, files, path = '') {
			return new Promise((resolve) => {
				if (item.isFile) {
					item.file((file) => {
						if (file.type.startsWith('image/')) {
							file.folderPath = path;
							files.push(file);
						}
						resolve();
					});
				} else if (item.isDirectory) {
					const dirReader = item.createReader();
					dirReader.readEntries(async (entries) => {
						for (const entry of entries) {
							await traverseFileTree(entry, files, path + item.name + '/');
						}
						resolve();
					});
				}
			});
		}

		function processFiles(files) {
			uploadedDataset = {};

			files.forEach(file => {
				let className = 'unlabeled';
				
				if (file.folderPath) {
					const parts = file.folderPath.split('/').filter(p => p);
					if (parts.length > 0) {
						className = parts[parts.length - 1];
					}
				}

				if (!uploadedDataset[className]) {
					uploadedDataset[className] = [];
				}
				uploadedDataset[className].push(file);
			});

			const classes = Object.keys(uploadedDataset);
			const totalImages = Object.values(uploadedDataset).reduce((sum, imgs) => sum + imgs.length, 0);

			if (classes.length >= 2 && totalImages > 0) {
				classNames = classes;
				document.getElementById('totalImages').textContent = totalImages;
				document.getElementById('totalClasses').textContent = classes.length;
				
				const classTags = document.getElementById('classTags');
				classTags.innerHTML = classes
					.map(name => `<div class="class-pill"><strong>${name}</strong><span>${uploadedDataset[name].length} images</span></div>`)
					.join('');

				datasetSummary.style.display = 'block';
			} else if (classes.length === 1) {
				alert("⚠️ Need at least 2 classes!\n\nYou only uploaded: " + classes[0] + "\n\nPlease organize images in folders:\nMyData/class1/\nMyData/class2/");
			}
		}

		startTrainBtn.addEventListener('click', async () => {
			if (classNames.length < 2) return;
			
			startTrainBtn.disabled = true;
			document.getElementById('trainSection').style.display = 'block';
			setTimeout(() => {
				document.getElementById('trainSection').scrollIntoView({ behavior: 'smooth' });
			}, 100);

			try {
				// Safety check for Library
				const getMobileNet = () => {
					if (typeof mobilenet !== 'undefined') return mobilenet;
					if (window.tf && window.tf.mobilenet) return window.tf.mobilenet;
					if (window.mobilenet) return window.mobilenet;
					return null;
				};

				// 1. Load Feature Extractor (AI Base)
				document.getElementById('progressText').textContent = 'Initializing AI Brain...';
				if (!featureExtractor) {
					const mobileNetLib = getMobileNet();
					if (!mobileNetLib) throw new Error("AI core engine (MobileNet) not found. Please refresh.");
					featureExtractor = await mobileNetLib.load({ version: 2, alpha: 1.0 });
				}

				// 2. Prepare Data with Augmentation & AI Feature Extraction
				document.getElementById('progressText').textContent = 'Extracting features with AI...';
				const featArrs = [];
				const labArrs = [];

				for (let i = 0; i < classNames.length; i++) {
					const className = classNames[i];
					const images = uploadedDataset[className];

					for (const file of images) {
						const imgTensor = await loadImage(file);
						
						// Use tf.tidy to prevent memory leaks during extraction
						tf.tidy(() => {
							// Normal image
							featArrs.push(featureExtractor.infer(imgTensor, true));
							labArrs.push(i);

							// Data Augmentation: Horizontal Flip
							const flipped = tf.image.flipLeftRight(imgTensor);
							featArrs.push(featureExtractor.infer(flipped, true));
							labArrs.push(i);
						});
						
						imgTensor.dispose();
					}
				}

				// 3. Combine it into training tensors
				const trainX = tf.concat(featArrs);
				const trainY = tf.oneHot(tf.tensor1d(labArrs, 'int32'), classNames.length);

				// 4. Create the "Power Head" Model (Keras style)
				const model = tf.sequential();
				model.add(tf.layers.dense({ units: 256, activation: 'relu', inputShape: [trainX.shape[1]] }));
				model.add(tf.layers.batchNormalization());
				model.add(tf.layers.dropout({ rate: 0.4 }));
				model.add(tf.layers.dense({ units: 128, activation: 'relu' }));
				model.add(tf.layers.batchNormalization());
				model.add(tf.layers.dense({ units: classNames.length, activation: 'softmax' }));

				model.compile({
					optimizer: tf.train.adam(0.0001),
					loss: 'categoricalCrossentropy',
					metrics: ['accuracy']
				});

				const circumference = 2 * Math.PI * 54;
				const progCircle = document.getElementById('progressCircle');
				const epochsCount = 20;

				await model.fit(trainX, trainY, {
					epochs: epochsCount,
					shuffle: true,
					validationSplit: 0.15,
					callbacks: {
						onEpochEnd: (epoch, logs) => {
							const p = ((epoch + 1) / epochsCount) * 100;
							const offset = circumference - (p / 100) * circumference;
							
							progCircle.style.strokeDashoffset = offset;
							document.getElementById('progressFill').style.width = p + '%';
							document.getElementById('progressPercent').textContent = Math.round(p) + '%';
							document.getElementById('progressText').textContent = `AI Learning: Epoch ${epoch + 1}/${epochsCount} - Accuracy: ${(logs.acc * 100).toFixed(1)}%`;
						}
					}
				});

				trainedModel = model;
				document.getElementById('progressText').textContent = 'AI Training Successful!';
				document.getElementById('testSection').style.display = 'block';
				document.getElementById('exportSection').style.display = 'block';
				
				setTimeout(() => {
					document.getElementById('testSection').scrollIntoView({ behavior: 'smooth' });
				}, 500);

				trainX.dispose();
				trainY.dispose();
			} catch (err) {
				console.error("Training Error:", err);
				alert("Error during training: " + err.message);
				document.getElementById('progressText').textContent = 'Training Failed!';
			} finally {
				startTrainBtn.disabled = false;
			}
		});

		async function loadImage(file) {
			return new Promise((resolve) => {
				const reader = new FileReader();
				reader.onload = (e) => {
					const img = new Image();
					img.onload = () => {
						const tensor = tf.browser.fromPixels(img)
							.resizeBilinear([224, 224])
							.toFloat()
							.div(255.0);
						resolve(tensor);
					};
					img.src = e.target.result;
				};
				reader.readAsDataURL(file);
			});
		}

		const testUpload = document.getElementById('testUpload');
		const testInput = document.getElementById('testInput');
		const testResult = document.getElementById('testResult');

		const UI_TRANSLATIONS = {
			id: {
				"status-ready": "VisionAI Siap",
				"hero-title": "Latih Klasifikasi Gambar Anda",
				"hero-desc": "Tanpa coding. Drag & drop gambar, dan biarkan AI bekerja.",
				"f-browser": "Pelatihan di Browser",
				"f-realtime": "Hasil Real-time",
				"f-noserver": "Tanpa Server",
				"step-1-title": "Langkah 1: Unggah Data Latih",
				"step-1-subtitle": "Tarik & lepas folder dengan gambar terorganisir",
				"upload-title": "Letakkan folder Anda di sini",
				"upload-subtitle": "atau klik untuk mencari file",
				"upload-hint": "Aturan: NamaFolder/Gambar1.jpg",
				"stat-images": "Total Gambar",
				"stat-classes": "Kelas",
				"btn-train": "Mulai Pelatihan",
				"step-2-title": "Pelatihan Berjalan",
				"step-2-subtitle": "Model sedang mempelajari data Anda",
				"prog-complete": "Selesai",
				"step-3-title": "Uji Model Anda",
				"step-3-subtitle": "Unggah gambar untuk melihat prediksi",
				"test-upload": "Klik untuk unggah gambar uji",
				"res-pred": "Prediksi",
				"res-conf": "Tingkat Keyakinan",
				"res-preds": "Semua Prediksi",
				"res-analysis": "Wawasan Analisis",
				"res-ency": "Ensiklopedia",
				"footer-powered": "Didukung oleh",
				"step-4-title": "Langkah 4: Ekspor & Gunakan Model",
				"step-4-subtitle": "Unduh paket model (Mendukung Mac & Windows)",
				"exp-tfjs": "Paket Web Universal (.zip)",
				"exp-tfjs-desc": "Berisi model.json, weights, dan halaman uji HTML siap pakai.",
				"exp-convert": "Kit Deployment Mobile",
				"exp-convert-desc": "Script konversi bungkusan dan instruksi untuk iOS/Android."
			},
			en: {
				"status-ready": "VisionAI Ready",
				"hero-title": "Train Your Own Image Classifier",
				"hero-desc": "No coding required. Just drag & drop your images, and let AI do the magic.",
				"f-browser": "Browser-based Training",
				"f-realtime": "Real-time Results",
				"f-noserver": "No Server Required",
				"step-1-title": "Step 1: Upload Training Data",
				"step-1-subtitle": "Drag & drop a folder with images organized",
				"upload-title": "Drop your folder here",
				"upload-subtitle": "or click to browse files",
				"upload-hint": "Organize: FolderName/Img1.jpg",
				"stat-images": "Total Images",
				"stat-classes": "Classes",
				"btn-train": "Start Training",
				"step-2-title": "Training in Progress",
				"step-2-subtitle": "Your model is learning from the data",
				"prog-complete": "Complete",
				"step-3-title": "Test Your Model",
				"step-3-subtitle": "Upload an image to see predictions",
				"test-upload": "Click to upload test image",
				"res-pred": "Prediction",
				"res-conf": "Confidence",
				"res-preds": "All Predictions",
				"res-analysis": "Analysis Insight",
				"res-ency": "Encyclopedia",
				"footer-powered": "Powered by",
				"step-4-title": "Step 4: Export & Use Model",
				"step-4-subtitle": "Download your model bundle (Compatible with Mac & Windows)",
				"exp-tfjs": "Universal Web Bundle (.zip)",
				"exp-tfjs-desc": "Includes model.json, weights, and a ready-to-run HTML test page.",
				"exp-convert": "Mobile Deployment Kits",
				"exp-convert-desc": "Bundled scripts and instructions to convert for iOS/Android."
			},
			jp: {
				"status-ready": "準備完了",
				"hero-title": "自作画像分類器のトレーニング",
				"hero-desc": "コーディング不要。画像をアップロードしてAIに任せましょう。",
				"f-browser": "ブラウザベース学習",
				"f-realtime": "リアルタイム結果",
				"f-noserver": "サーバー不要",
				"step-1-title": "ステップ 1: トレーニングデータのアップロード",
				"step-1-subtitle": "整理された画像フォルダをドラッグ＆ドロップ",
				"upload-title": "ここにフォルダをドロップ",
				"upload-subtitle": "またはクリックして選択",
				"upload-hint": "ルール: フォルダ名/画像1.jpg",
				"stat-images": "総画像数",
				"stat-classes": "クラス数",
				"btn-train": "トレーニング開始",
				"step-2-title": "トレーニング中",
				"step-2-subtitle": "モデルが学習しています",
				"prog-complete": "完了",
				"step-3-title": "モデルをテストする",
				"step-3-subtitle": "画像をアップロードして結果を確認",
				"test-upload": "テスト画像をアップロード",
				"res-pred": "予測結果",
				"res-conf": "信頼度",
				"res-preds": "すべての予測",
				"res-analysis": "分析の洞察",
				"res-ency": "百科事典",
				"footer-powered": "提供元",
				"step-4-title": "ステップ 4: モデルのエクスポートと使用",
				"step-4-subtitle": "モデルパッケージのダウンロード (Mac & Windows 対応)",
				"exp-tfjs": "ユニバーサル Web パッケージ (.zip)",
				"exp-tfjs-desc": "model.json、重み、および実行可能な HTML テストページが含まれています。",
				"exp-convert": "モバイルデプロイメントキット",
				"exp-convert-desc": "iOS/Android 用の変換スクリプトと手順が含まれています。"
			}
		};
		const KNOWLEDGE_BASE = {
			"1000": {
				id: { name: "Uang 1,000 Rupiah", desc: "Uang kertas Rp1.000 (2022) menampilkan pahlawan Tjut Meutia. Bagian belakangnya menunjukkan Tari Tifa, Banda Neira, dan Bunga Anggrek Larat. Ini adalah pecahan terendah dalam seri emisi 2022." },
				en: { name: "1,000 Rupiah Note", desc: "The 1,000 Rupiah note (2022) features heroine Tjut Meutia. The reverse depicts the Tifa Dance, Banda Neira, and the Cooktown Orchid." },
				jp: { name: "1,000ルピア紙幣", desc: "1,000ルピア紙幣（2022年版）は、チュット・ムティアを主役に描いています。裏面にはティファ舞踊などが描かれています。" }
			},
			"2000": {
				id: { name: "Uang 2,000 Rupiah", desc: "Uang kertas Rp2.000 (2022) menampilkan Mohammad Hoesni Thamrin. Bagian belakang menunjukkan Tari Piring, Ngarai Sianok, dan Bunga Jeumpa. Warna dominannya adalah abu-abu." },
				en: { name: "2,000 Rupiah Note", desc: "The 2,000 Rupiah note (2022) features Mohammad Hoesni Thamrin. The reverse shows the Plate Dance, Sianok Canyon, and Jeumpa Flower." },
				jp: { name: "2,000ルピア紙幣", desc: "2,000ルピア紙幣は、ムハンマド・フスニ・タムリンを描いています。裏面には皿回し舞踊が描かれています。" }
			},
			"5000": {
				id: { name: "Uang 5,000 Rupiah", desc: "Uang kertas Rp5.000 (2022) menampilkan Dr. K.H. Idham Chalid. Bagian belakangnya menampilkan Tari Gambyong, Gunung Bromo, dan Bunga Sedap Malam." },
				en: { name: "5,000 Rupiah Note", desc: "The 5,000 Rupiah note (2022) features Dr. K.H. Idham Chalid. The reverse depicts Gambyong Dance, Mount Bromo, and Tuberose." },
				jp: { name: "5,000ルピア紙幣", desc: "5,000ルピア紙幣は、イドハム・チャリド博士を描いています。裏面にはブロモ山などが描かれています。" }
			},
			"10000": {
				id: { name: "Uang 10,000 Rupiah", desc: "Uang kertas Rp10.000 menampilkan pahlawan Frans Kaisiepo. Bagian belakang menunjukkan Tari Pakarena, Taman Nasional Wakatobi, dan Bunga Cempaka Hutan Kasar." },
				en: { name: "10,000 Rupiah Note", desc: "Features Frans Kaisiepo on the front. The reverse shows Pakarena Dance, Wakatobi National Park, and Forest Champak." },
				jp: { name: "10,000ルピア紙幣", desc: "フランス・カイシエポを描いています。裏面にはワカトビ国立公園などが描かれています。" }
			},
			"20000": {
				id: { name: "Uang 20,000 Rupiah", desc: "Uang kertas Rp20.000 menampilkan Dr. G.S.S.J. Ratulangi. Bagian belakang menunjukkan Tari Gong, Derawan, dan Bunga Anggrek Hitam." },
				en: { name: "20,000 Rupiah Note", desc: "Features Dr. G.S.S.J. Ratulangi. The reverse shows Gong Dance, Derawan Islands, and Black Orchid." },
				jp: { name: "20,000ルピア紙幣", desc: "サム・ラトゥランギ博士を描いています。裏面にはデラワン諸島などが描かれています。" }
			},
			"50000": {
				id: { name: "Uang 50,000 Rupiah", desc: "Uang kertas Rp50.000 menampilkan Ir. H. Djuanda Kartawidjaja. Bagian belakang menunjukkan Tari Legong, Taman Nasional Komodo, dan Bunga Jepun Bali." },
				en: { name: "50,000 Rupiah Note", desc: "Features Ir. H. Djuanda Kartawidjaja. The reverse shows Legong Dance, Komodo National Park, and Frangipani." },
				jp: { name: "50,000ルピア紙幣", desc: "ジュアンダ・カルタウィジャヤを描いています。裏面にはコモド国立公園などが描かれています。" }
			},
			"100000": {
				id: { name: "Uang 100,000 Rupiah", desc: "Pecahan tertinggi Indonesia (Red Note) menampilkan Soekarno dan Hatta. Bagian belakang menunjukkan Tari Topeng Betawi, Raja Ampat, dan Bunga Anggrek Bulan." },
				en: { name: "100,000 Rupiah Note", desc: "Indonesia's highest denomination featuring Soekarno and Hatta. Shows Raja Ampat and Moon Orchid on the reverse." },
				jp: { name: "100,000ルピア紙幣", desc: "インドネシアの最高額紙幣。スカルノとハッタ、そしてラジャ・アンパットが描かれています。" }
			},
			"laptop": {
				id: { name: "Laptop / Komputer Portabel", desc: "Perangkat elektronik bergerak yang mengintegrasikan layar, keyboard, dan prosesor. Revolusi teknologi yang memungkinkan bekerja dari mana saja." },
				en: { name: "Laptop Computer", desc: "A portable personal computer designed for mobile productivity, integrating all components in one unit." },
				jp: { name: "ノートパソコン", desc: "持ち運び可能なパーソナルコンピュータで、現代の生産性に不可欠なツールです。" }
			}
		};

		let currentGlobalLang = 'id';
		let lastProbabilities = null;
		let lastMaxIndex = null;
		let lastConfidence = null;

		const updateResultUI = async (lang) => {
			if (lastMaxIndex === null) return;
			const predictedClass = classNames[lastMaxIndex];
			const insightText = document.getElementById('insightText');
			const encySection = document.getElementById('encyclopediaSection');
			const encyName = document.getElementById('encyName');
			const encyDesc = document.getElementById('encyDesc');
			const allPreds = document.getElementById('allPredictions');
			
			if (allPreds) {
				allPreds.innerHTML = `<h4>${UI_TRANSLATIONS[lang]["res-preds"]}</h4>` +
					classNames.map((name, i) => `
						<div class="prediction-item">
							<span class="name">${name}</span>
							<span class="score">${(lastProbabilities[i] * 100).toFixed(1)}%</span>
						</div>
					`).join('');
			}

			const explanations = {
				id: {
					vhigh: `AI Sangat Yakin! Ini adalah <span class="insight-highlight">"${predictedClass}"</span>.`,
					high: `AI memprediksi ini adalah <span class="insight-highlight">"${predictedClass}"</span>.`,
					low: `AI menebak ini <span class="insight-highlight">"${predictedClass}"</span> dengan ragu.`,
					warning: `<br/><small style="opacity:0.6;">*Berdasarkan pola visual dari dataset Anda.</small>`
				},
				en: {
					vhigh: `AI is Very Confident! This is <span class="insight-highlight">"${predictedClass}"</span>.`,
					high: `AI predicts this is <span class="insight-highlight">"${predictedClass}"</span>.`,
					low: `AI guesses this is <span class="insight-highlight">"${predictedClass}"</span> with low confidence.`,
					warning: `<br/><small style="opacity:0.6;">*Based on visual patterns from your dataset.</small>`
				},
				jp: {
					vhigh: `AIは非常に自信があります！これは <span class="insight-highlight">"${predictedClass}"</span> です。`,
					high: `AIはこれが <span class="insight-highlight">"${predictedClass}"</span> だと予測しています。`,
					low: `AIはこれが <span class="insight-highlight">"${predictedClass}"</span> だと低信頼度で推測しています。`,
					warning: `<br/><small style="opacity:0.6;">*データセットの視覚的パターンに基づいています。</small>`
				}
			};

			const exp = explanations[lang];
			insightText.innerHTML = (lastConfidence > 90 ? exp.vhigh : (lastConfidence > 70 ? exp.high : exp.low)) + exp.warning;
			encySection.style.display = 'block';

			// DYNAMIC AI SEARCH LOGIC
			encyName.textContent = lang === 'id' ? 'Mencari wawasan AI...' : 'Searching for AI insights...';
			encyDesc.textContent = '...';
			
			let finalContent = null;
			const cleanLabel = predictedClass.toLowerCase();

			// 1. First check Curated Fallback (Rupiah specialists)
			const nominalMap = {
				"1000": ["1000", "1.000", "1rb", "1k", "seribu", "100b", "100"],
				"2000": ["2000", "2.000", "2rb", "2k", "duaribu"],
				"5000": ["5000", "5.000", "5rb", "5k", "limaribu"],
				"10000": ["10000", "10.000", "10rb", "10k", "sepuluhribu"],
				"20000": ["20000", "20.000", "20rb", "2k", "duapuluhribu"],
				"50000": ["50000", "50.000", "50rb", "50k", "limapuluhribu"],
				"100000": ["100000", "100.000", "100rb", "100k", "seratusribu"]
			};

			let curatedKey = null;
			for(let k in nominalMap) {
				if (nominalMap[k].some(s => cleanLabel.includes(s))) { curatedKey = k; break; }
			}

			// 2. Fetch Live from Wikipedia API (Real search, not hardcoded!)
			try {
				const wikiLang = lang === 'id' ? 'id' : (lang === 'jp' ? 'ja' : 'en');
				const response = await fetch(`https://${wikiLang}.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(predictedClass)}`);
				if (response.ok) {
					const data = await response.json();
					finalContent = { name: data.title, desc: data.extract };
				}
			} catch (err) {
				console.log("Wiki Search Error:", err);
			}

			// 3. Final Render Logic
			if (finalContent) {
				encyName.textContent = finalContent.name;
				encyDesc.textContent = finalContent.desc;
			} else if (curatedKey && KNOWLEDGE_BASE[curatedKey]) {
				const curated = KNOWLEDGE_BASE[curatedKey][lang];
				encyName.textContent = curated.name;
				encyDesc.textContent = curated.desc;
			} else {
				const ud = {
					id: { title: `Objek: ${predictedClass}`, desc: `VisionAI mengenali pola ini sebagai "${predictedClass}". Model ini dilatih secara kustom menggunakan data Anda.` },
					en: { title: `Object: ${predictedClass}`, desc: `VisionAI recognizes this pattern as "${predictedClass}". This model was custom trained using your specific dataset.` },
					jp: { title: `オブジェクト: ${predictedClass}`, desc: `VisionAIはこのパターンを「${predictedClass}」として認識します。このモデルは提供されたデータでトレーニングされました。` }
				}[lang];
				encyName.textContent = ud.title;
				encyDesc.textContent = ud.desc;
			}

			// Add Wiki Lookup Link (with fixed styling)
			const wikiLangLink = lang === 'id' ? 'id' : (lang === 'jp' ? 'ja' : 'en');
			const wikiBtnLabel = { id: 'Pelajari di Wikipedia', en: 'Learn on Wikipedia', jp: 'ウィキペディアで学ぶ' };
			const wikiUrl = `https://${wikiLangLink}.wikipedia.org/wiki/${encodeURIComponent(predictedClass)}`;
			
			const existingWiki = document.getElementById('wikiLinkBtn');
			if (existingWiki) existingWiki.remove();

			const wikiBtn = document.createElement('a');
			wikiBtn.id = 'wikiLinkBtn';
			wikiBtn.href = wikiUrl;
			wikiBtn.target = '_blank';
			wikiBtn.className = 'btn-wiki';
			wikiBtn.style.display = 'inline-flex';
			wikiBtn.style.alignItems = 'center';
			wikiBtn.style.gap = '8px';
			wikiBtn.style.marginTop = '16px';
			
			wikiBtn.innerHTML = `
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px; height:16px; flex-shrink:0;">
					<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>
				</svg>
				<span>${wikiBtnLabel[lang]}</span>
			`;
			encyDesc.parentElement.appendChild(wikiBtn);
		};

		const updateGlobalUI = (lang) => {
			currentGlobalLang = lang;
			document.querySelectorAll('[data-t]').forEach(el => {
				const key = el.getAttribute('data-t');
				if (UI_TRANSLATIONS[lang][key]) {
					if (el.tagName === 'H2' || el.tagName === 'P') el.innerHTML = UI_TRANSLATIONS[lang][key];
					else el.textContent = UI_TRANSLATIONS[lang][key];
				}
			});
			updateResultUI(lang);
		};

		document.querySelectorAll('.g-lang-btn').forEach(btn => {
			btn.addEventListener('click', (e) => {
				document.querySelectorAll('.g-lang-btn').forEach(b => b.classList.remove('active'));
				e.target.classList.add('active');
				updateGlobalUI(e.target.dataset.gLang);
			});
		});

		testUpload.addEventListener('click', () => testInput.click());

		testInput.addEventListener('change', async (e) => {
			const file = e.target.files[0];
			if (file && trainedModel) {
				const reader = new FileReader();
				reader.onload = async (e) => {
					document.getElementById('testImage').src = e.target.result;
					const testImg = new Image();
					testImg.onload = async () => {
						const testImgTensor = tf.browser.fromPixels(testImg).resizeBilinear([224, 224]).toFloat().div(255.0);
						const feature = featureExtractor.predict(testImgTensor.expandDims(0));
						const predictions = await trainedModel.predict(feature);
						lastProbabilities = await predictions.data();
						lastMaxIndex = lastProbabilities.indexOf(Math.max(...Array.from(lastProbabilities)));
						lastConfidence = lastProbabilities[lastMaxIndex] * 100;

						document.getElementById('resultClass').textContent = classNames[lastMaxIndex];
						document.getElementById('confidenceFill').style.width = lastConfidence + '%';
						document.getElementById('confidenceText').textContent = `${lastConfidence.toFixed(1)}%`;

						testResult.style.display = 'block';
						document.getElementById('resultInsights').style.display = 'block';
						
						// Run Deep AI Check (Using standard MobileNet for 1000 classes)
						runDeepAICheck(testImg);
						
						updateResultUI(currentGlobalLang);

						testImgTensor.dispose();
						feature.dispose();
						predictions.dispose();
					};
					testImg.src = e.target.result;
				};
				reader.readAsDataURL(file);
			}
		});

		async function runDeepAICheck(imgElement) {
			const aiLoading = document.getElementById('aiLoading');
			const aiDeepResult = document.getElementById('aiDeepResult');
			const aiDesc = document.getElementById('aiDesc');
			const aiTags = document.getElementById('aiTags');

			aiLoading.style.display = 'flex';
			aiDeepResult.style.display = 'none';

			try {
				// Safety utility to find mobilenet in any global namespace
				const getMobileNet = () => {
					if (typeof mobilenet !== 'undefined') return mobilenet;
					if (window.tf && window.tf.mobilenet) return window.tf.mobilenet;
					if (window.mobilenet) return window.mobilenet;
					return null;
				};

				if (!aiModel) {
					const mobileNetLib = getMobileNet();
					if (!mobileNetLib) throw new Error("Vision AI Library not loaded yet.");
					aiModel = await mobileNetLib.load();
				}
				
				const predictions = await aiModel.classify(imgElement);
				
				if (predictions && predictions.length > 0) {
					const top = predictions[0];
					const others = predictions.slice(1);
					
					aiDesc.innerHTML = `Vision AI analysis detects this as <span class="ai-highlight">${top.className}</span> with ${Math.round(top.probability * 100)}% certainty levels.`;
					
					aiTags.innerHTML = predictions.map(p => `
						<div class="ai-tag">
							<span>${p.className.split(',')[0]}</span>
							<small>${Math.round(p.probability * 100)}%</small>
						</div>
					`).join('');
				}
			} catch (err) {
				console.error("AI Check Error:", err);
				aiDesc.textContent = "AI Vision insight temporarily unavailable.";
			} finally {
				aiLoading.style.display = 'none';
				aiDeepResult.style.display = 'block';
			}
		}

		// EXPORT HUB LOGIC: BUNDLING FOR MAC & WINDOWS COMPATIBILITY
		const downloadBlob = (blob, filename) => {
			const url = URL.createObjectURL(blob);
			const link = document.createElement('a');
			link.href = url;
			link.download = filename;
			link.click();
			URL.revokeObjectURL(url);
		};

		const getZipBundle = async (format) => {
			if (!trainedModel) return null;
			
			const zip = new JSZip();
			const artifacts = await trainedModel.save(tf.io.withSaveHandler(async (art) => art));
			
			// Always add the core model files with credits
			const modelJson = {
				modelTopology: artifacts.modelTopology,
				format: artifacts.format,
				generatedBy: "VisionAI (KaMy)",
				convertedBy: "Elmee",
				author: "Elmee",
				weightsManifest: [{
					paths: ['model.weights.bin'],
					weights: artifacts.weightSpecs
				}]
			};
			
			zip.file("model.json", JSON.stringify(modelJson, null, 2));
			zip.file("model.weights.bin", artifacts.weightData);

			if (format === 'web') {
				const htmlRunner = `
<!DOCTYPE html>
<html>
<head>
    <title>VisionAI Web Runner - Model by Elmee</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"><\/script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #0a0a0a; color: white; }
        .card { background: #1a1a1a; padding: 40px; border-radius: 20px; display: inline-block; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        button { background: #0066ff; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .credit { margin-top: 30px; font-size: 0.8em; color: #666; }
        .credit span { color: #00ff88; font-weight: bold; }
    </style>
</head>
<body>
    <div class="card">
        <h1 style="margin-top:0">VisionAI Runner</h1>
        <p style="color:#aaa">Model trained by <strong>Elmee</strong></p>
        <div style="margin: 30px 0;">
            <input type="file" id="fileInput" accept="image/*" style="display:none">
            <button onclick="document.getElementById('fileInput').click()">Upload Image to Test</button>
        </div>
        <div id="result" style="font-weight:bold; font-size:1.5em; color:#00ff88; min-height:1.5em;"></div>
        <div class="credit">Powered by VisionAI &bull; Created by <span>Elmee</span></div>
    </div>
    <script>
        let model;
        const classNames = ${JSON.stringify(classNames)};
        
        async function init() {
            model = await tf.loadLayersModel('model.json');
            console.log("Model loaded!");
        }

        document.getElementById('fileInput').onchange = async (e) => {
            const file = e.target.files[0];
            const img = new Image();
            img.onload = async () => {
                const tensor = tf.browser.fromPixels(img).resizeBilinear([224, 224]).toFloat().div(255).expandDims(0);
                const pred = await model.predict(tensor);
                const data = await pred.data();
                const idx = data.indexOf(Math.max(...Array.from(data)));
                document.getElementById('result').innerText = classNames[idx];
            };
            img.src = URL.createObjectURL(file);
        };
        init();
    <\/script>
</body>
</html>`;
				zip.file("index.html", htmlRunner);
				zip.file("README.md", "# VisionAI Web Bundle\n\n**Author:** Elmee\n\n1. Extract this ZIP.\n2. Open the folder in a local web server.\n3. Open index.html to test your model.");
			} else if (format === 'ios') {
				zip.file("convert_to_coreml.py", "# VisionAI iOS Converter\n# Credits: Elmee\nprint('CoreML conversion script prepared by Elmee')");
				zip.file("README.md", "# VisionAI iOS Deployment Kit\n\n**Author:** Elmee\n\n1. Transfer this folder to a Mac.\n2. Run conversion script to get .mlmodel.");
			} else if (format === 'android') {
				zip.file("convert_to_tflite.py", "# Android TFLite Converter\n# Credits: Elmee\nprint('TFLite conversion script prepared by Elmee')");
				zip.file("README.md", "# VisionAI Android Deployment Kit\n\n**Author:** Elmee\n\n1. Extract ZIP.\n2. Run conversion to get .tflite.");
			}

			return await zip.generateAsync({type:"blob"});
		};

		document.querySelectorAll('.format-tab').forEach(tab => {
			tab.addEventListener('click', () => {
				document.querySelectorAll('.format-tab').forEach(t => t.classList.remove('active'));
				document.querySelectorAll('.format-panel').forEach(p => p.classList.remove('active'));
				tab.classList.add('active');
				document.getElementById(`panel-${tab.dataset.format}`).classList.add('active');
			});
		});

		document.getElementById('btnExportWeb').addEventListener('click', async () => {
			if (!trainedModel) return;
			const btn = document.getElementById('btnExportWeb');
			btn.innerText = "Bundling...";
			const blob = await getZipBundle('web');
			downloadBlob(blob, "VisionAI_Web_Bundle.zip");
			btn.innerText = "Export for Web";
		});

		document.getElementById('btnExportIos').addEventListener('click', async () => {
			if (!trainedModel) return;
			const blob = await getZipBundle('ios');
			downloadBlob(blob, "VisionAI_iOS_Kit.zip");
		});

		document.getElementById('btnExportAndroid').addEventListener('click', async () => {
			if (!trainedModel) return;
			const blob = await getZipBundle('android');
			downloadBlob(blob, "VisionAI_Android_Kit.zip");
		});

	</script>
</body>
</html>
